# Чуток помощи с тестированием
В файле `postman_import_config.json` находится экспортированная конфигурация моего API. Импортируй её себе в Postman, если хочешь упростить жизнь
# Как запустить
## Если ты используешь docker
1) Создаёшь в корне проекта Dockerfile c таким котентом
```
FROM node:16-alpine
WORKDIR /app
```
2) Билдишь образ проекта
```
docker build -t task3:latest .
```
3) Запускаешь контейнер
```
docker run -p 80:80 --add-host host.docker.internal:host-gateway -v $(pwd):/app -it task3 sh
```
(Если юзаешь другой порт, то измени порт в .env и в команде для запуска контейнера)
4) В файле .env обнови `APPLICATION_PLATFORM=` до `APPLICATION_PLATFORM=docker`
(Это нужно чтобы тесты делали запросы к хосту, а не к докер контейнеру)
5) Переходи к части **Если не истользуешь docker** 
## Если не истользуешь docker
1) Запускаешь `npm install`
2) Тыкаешь команды из списка ниже
### Команды
 - Запустить приложение в dev моде `npm run start:dev`
 - Запустить приложение в prod моде `npm run start:prod`
 - Запустить приложение в cluster моде `npm run start:muilti`. Можешь запустить `npm run start:muilti -- --verbose` чтобы промониторить какой pid обработал запрос
   (т.к мы юзаем fork, чтобы развернуть кластер, то известно, что он создаёт изолированные процессы и если вдруг после добавления юзера результат запроста GET /api/users (все юзеры) окажется пустым , то возможно запросы попали на разные воркеры)
 - Запустить линт `npm run lint`
 - Запустить тесты `npm test` (Тесты запускать только после запуска приложения)
